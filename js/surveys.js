(function(){let a;const b=(a)=>{a.remove()},c=()=>{let c=a.textContent,d=a.parentElement.parentElement;fetch(`https://osomform.firebaseio.com/users/${c}.json`,{method:'delete'}).then((a)=>a.json().then(()=>{b(d)}))};showModalToRemove=()=>{document.querySelector('.modal__container').classList.add('modal-visible'),document.querySelector('.modal').classList.add('background-visible')};const d=()=>{document.querySelectorAll('.table__remove-button').forEach((b)=>{b.addEventListener('click',(b)=>{a=b.currentTarget.parentElement.querySelector('span'),showModalToRemove()})})},e=(a)=>{const b=document.querySelector('.warning-info');b&&b.remove();const c=document.querySelector('tbody');if(!a)return;let e=Object.keys(a).map((b)=>{let c=a[b];return c.id=b,c});const f=document.getElementById('usersTemplate').innerHTML,g=Handlebars.compile(f);let h,i='';e.forEach((a)=>{h={firstName:a.firstName,lastName:a.lastName,login:a.login,city:a.city,email:a.email,id:a.id},i+=g(h)}),c.insertAdjacentHTML('beforeend',i),d()},f=()=>{const a=document.createElement('p');a.innerHTML='There is a connection error, unable to load data.',a.classList.add('warning-info'),document.querySelector('.table-container').appendChild(a)},g=()=>{document.querySelector('.modal__container').classList.remove('modal-visible'),document.querySelector('.modal').classList.remove('background-visible')};document.querySelector('.modal__footer--surveys').addEventListener('click',(a)=>{'cancelDeletingButton'===a.target.id?g():'confirmDeletingButton'===a.target.id&&(c(a),g())}),document.addEventListener('DOMContentLoaded',()=>{fetch('https://osomform.firebaseio.com/users.json').then((a)=>{if(a.ok)return a.json();throw new Error((a)=>{console.log(a)})}).then((a)=>{e(a)}).catch((a)=>{console.log(a),f()})})})();