(function(){function a(c,a){return c.city<a.city?-1:c.city>a.city?1:0}function b(b){b.sort(a);const c=document.querySelector('#city');b.forEach((a)=>{const b=document.createElement('option');b.innerHTML=a.city,b.value=a.city,c.appendChild(b)})}function c(){let a=[];Promise.all([1,11,21,31,41,51].map((b)=>fetch(`https://wft-geo-db.p.mashape.com/v1/geo/countries/PL/regions/LD/cities?minPopulation=2025&offset=${b}&limit=10`,{headers:new Headers({"X-Mashape-Key":'jGFiACuqUmmshdbzTerBFXkUMmLFp1eSONIjsnrzszoIv8eyuw'})}).then((a)=>{if(a.ok)return a.json();throw new Error((a)=>{console.log(a)})}).then((b)=>{return a=a.concat(b.data),a}).catch((a)=>console.log(a)))).then(()=>b(a))}const d=/^[a-zA-ZąćęłńóśźżĄĘŁŃÓŚŹŻ]+(?:[\s-][a-zA-ZąćęłńóśźżĄĘŁŃÓŚŹŻ]+)*$/i,e=/^[0-9a-zA-Z_.-]+@[0-9a-zA-Z.-]+\.[a-zA-Z]{2,3}$/i,f=document.querySelectorAll('[required]');const g=()=>{document.querySelector('.modal__container').classList.add('modal-visible'),document.querySelector('.modal').classList.add('background-visible')},h=(a)=>[...a].reduce((a,b)=>{return b.name&&(a[b.name]=b.value),a},{}),i=()=>{const a=document.querySelector('.form');let b=null;b=h(a.elements),fetch('https://osomform.firebaseio.com/users.json',{method:'post',headers:{"Content-type":'application/json; charset=UTF-8'},body:JSON.stringify(b)}).then((a)=>a.json()).then(()=>{g()}).catch((a)=>console.log(a))},j=(a,b)=>{!1==b?(a.classList.add('warning-input'),null!==a.nextElementSibling&&a.nextElementSibling.classList.add('visible-warning')):(a.classList.remove('warning-input'),null!==a.nextElementSibling&&a.nextElementSibling.classList.remove('visible-warning'))},k=(a,b)=>{let c=!0;return void 0===b?''===a.value&&(c=!1):(!b.test(a.value)||''===a.value)&&(c=!1),c?(j(a,!0),!0):(j(a,!1),!1)},l=(a)=>{localStorage.setItem(a.name,a.value)},m=()=>{[...f].forEach((a)=>{a.value=localStorage.getItem(a.name)})},n=()=>{[...f].forEach((a)=>{'input'===a.nodeName.toLowerCase()&&(a.addEventListener('change',()=>{l(event.target)}),'text'==a.type&&'login'!==a.name&&a.addEventListener('input',(a)=>{k(a.target,d)}),'login'==a.name&&a.addEventListener('change',(a)=>{k(a.target,void 0)}),'email'==a.type&&a.addEventListener('input',(a)=>{k(a.target,e)}))})},o=(a)=>{a.preventDefault();let b=!0;return[...f].forEach((a)=>{if('input'===a.nodeName.toLowerCase()){const c=a.type.toLowerCase(),f=a.name;'text'==c&&'login'!==f&&!1==k(a,d)&&(b=!1),'email'==c&&!1==k(a,e)&&(b=!1),'checkbox'!=c||a.checked||(b=!1)}}),!!b&&void i()};document.querySelector('.modal__button').addEventListener('click',()=>{document.querySelector('.modal__container').classList.remove('modal-visible'),document.querySelector('.modal').classList.remove('background-visible')}),document.addEventListener('DOMContentLoaded',()=>{c(),n(),m()}),document.querySelector('.form').addEventListener('submit',(a)=>{o(a)})})();